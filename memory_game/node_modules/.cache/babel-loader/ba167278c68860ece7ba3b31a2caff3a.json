{"ast":null,"code":"var _jsxFileName = \"D:\\\\latihan\\\\course2\\\\react\\\\memory_game\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport Navbar from './Navbar';\nimport Card from './Card';\nimport shuffle from 'shuffle-array';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CardState = {\n  HIDING: 0,\n  SHOWING: 1,\n  MATCH: 2\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    let cards = [{\n      id: 0,\n      cardState: CardState.HIDING,\n      backgroundColor: 'red'\n    }, {\n      id: 1,\n      cardState: CardState.HIDING,\n      backgroundColor: 'red'\n    }, {\n      id: 2,\n      cardState: CardState.HIDING,\n      backgroundColor: 'navy'\n    }, {\n      id: 3,\n      cardState: CardState.HIDING,\n      backgroundColor: 'navy'\n    }, {\n      id: 4,\n      cardState: CardState.HIDING,\n      backgroundColor: 'green'\n    }, {\n      id: 5,\n      cardState: CardState.HIDING,\n      backgroundColor: 'green'\n    }, {\n      id: 6,\n      cardState: CardState.HIDING,\n      backgroundColor: 'yellow'\n    }, {\n      id: 7,\n      cardState: CardState.HIDING,\n      backgroundColor: 'yellow'\n    }, {\n      id: 8,\n      cardState: CardState.HIDING,\n      backgroundColor: 'black'\n    }, {\n      id: 9,\n      cardState: CardState.HIDING,\n      backgroundColor: 'black'\n    }, {\n      id: 10,\n      cardState: CardState.HIDING,\n      backgroundColor: 'purple'\n    }, {\n      id: 11,\n      cardState: CardState.HIDING,\n      backgroundColor: 'purple'\n    }, {\n      id: 12,\n      cardState: CardState.HIDING,\n      backgroundColor: 'pink'\n    }, {\n      id: 13,\n      cardState: CardState.HIDING,\n      backgroundColor: 'pink'\n    }, {\n      id: 14,\n      cardState: CardState.HIDING,\n      backgroundColor: 'lightskyblue'\n    }, {\n      id: 15,\n      cardState: CardState.HIDING,\n      backgroundColor: 'lightskyblue'\n    }];\n    cards = shuffle(cards);\n    this.state = {\n      cards,\n      noClick: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleNewGame = this.handleNewGame.bind(this);\n  }\n\n  handleClick(id) {\n    const mapCardState = (cards, idToChange, newCardState) => {\n      return cards, map(c => {\n        if (idToChange.includes(c.id)) {\n          return { ...c,\n            cardState: newCardState\n          };\n        }\n\n        return c;\n      });\n    }; // this.setState(prev => {\n    //   let cards = prev.cards.map(c => (\n    //     c.id === id ? {\n    //       ...c,\n    //       cardState: c.cardState === CardState.HIDING ? CardState.MATCHING :\n    //         CardState.HIDING\n    //     } : c\n    //   ))\n    //   return { cards }\n    // })\n\n\n    const foundCard = this.state.cards.find(c => c.id === id);\n\n    if (this.state.noClick || foundCard.cardState !== CardState.HIDING) {\n      return;\n    }\n\n    let noClick = false;\n    let cards = mapCardState(this.state.cards, [id], CardState.SHOWING);\n    const showingCards = cards.filter(c => c.cardState === CardState.SHOWING);\n    const ids = showingCards.map(c => c.id);\n\n    if (showingCards.length === 2 && showingCards[0].backgroundColor === showingCards[1].backgroundColor) {\n      cards = mapCardState(cards, ids, CardState.MATCHING);\n    } else if (showingCards.length === 2) {\n      let hidingCards = mapCardState(cards, ids, CardState.HIDING);\n      noClick = true;\n      this.setState({\n        cards,\n        noClick\n      }, () => {\n        setTimeout(() => {\n          this.setState({\n            cards: hidingCards,\n            noClick\n          });\n        }, 3000);\n      });\n    }\n  }\n\n  handleNewGame() {\n    let cards = this.state.cards.map(c => ({ ...c,\n      cardState: CardState.HIDING\n    }));\n    cards = shuffle(cards);\n    this.setState({\n      cards\n    });\n  }\n\n  render() {\n    const cards = this.state.cards.map(d => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        showing: d.cardState !== CardState.HIDING,\n        backgroundColor: d.backgroundColor,\n        onClick: () => this.handleClick(d.id)\n      }, d.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        onNewGame: this.handleNewGame\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), cards]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/latihan/course2/react/memory_game/src/App.js"],"names":["React","Component","Navbar","Card","shuffle","CardState","HIDING","SHOWING","MATCH","App","constructor","props","cards","id","cardState","backgroundColor","state","noClick","handleClick","bind","handleNewGame","mapCardState","idToChange","newCardState","map","c","includes","foundCard","find","showingCards","filter","ids","length","MATCHING","hidingCards","setState","setTimeout","render","d"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Navbar from './Navbar';\nimport Card from './Card';\nimport shuffle from 'shuffle-array';\nimport './App.css';\n\n\nconst CardState = {\n  HIDING: 0,\n  SHOWING: 1,\n  MATCH: 2\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    let cards = [\n      { id: 0, cardState: CardState.HIDING, backgroundColor: 'red' },\n      { id: 1, cardState: CardState.HIDING, backgroundColor: 'red' },\n      { id: 2, cardState: CardState.HIDING, backgroundColor: 'navy' },\n      { id: 3, cardState: CardState.HIDING, backgroundColor: 'navy' },\n      { id: 4, cardState: CardState.HIDING, backgroundColor: 'green' },\n      { id: 5, cardState: CardState.HIDING, backgroundColor: 'green' },\n      { id: 6, cardState: CardState.HIDING, backgroundColor: 'yellow' },\n      { id: 7, cardState: CardState.HIDING, backgroundColor: 'yellow' },\n      { id: 8, cardState: CardState.HIDING, backgroundColor: 'black' },\n      { id: 9, cardState: CardState.HIDING, backgroundColor: 'black' },\n      { id: 10, cardState: CardState.HIDING, backgroundColor: 'purple' },\n      { id: 11, cardState: CardState.HIDING, backgroundColor: 'purple' },\n      { id: 12, cardState: CardState.HIDING, backgroundColor: 'pink' },\n      { id: 13, cardState: CardState.HIDING, backgroundColor: 'pink' },\n      { id: 14, cardState: CardState.HIDING, backgroundColor: 'lightskyblue' },\n      { id: 15, cardState: CardState.HIDING, backgroundColor: 'lightskyblue' }\n    ];\n    cards = shuffle(cards);\n    this.state = { cards, noClick: false }\n\n    this.handleClick = this.handleClick.bind(this);\n    this.handleNewGame = this.handleNewGame.bind(this);\n\n  }\n  handleClick(id) {\n    const mapCardState = (cards, idToChange, newCardState) => {\n      return cards, map(c => {\n        if (idToChange.includes(c.id)) {\n          return {\n            ...c,\n            cardState: newCardState\n          }\n        }\n        return c;\n      })\n    }\n    // this.setState(prev => {\n    //   let cards = prev.cards.map(c => (\n    //     c.id === id ? {\n    //       ...c,\n    //       cardState: c.cardState === CardState.HIDING ? CardState.MATCHING :\n    //         CardState.HIDING\n    //     } : c\n    //   ))\n    //   return { cards }\n    // })\n    const foundCard = this.state.cards.find(c => c.id === id)\n    if (this.state.noClick || foundCard.cardState !== CardState.HIDING) {\n      return;\n    }\n    let noClick = false;\n\n    let cards = mapCardState(this.state.cards, [id], CardState.SHOWING);\n\n    const showingCards = cards.filter((c) => c.cardState === CardState.SHOWING)\n\n    const ids = showingCards.map(c => c.id)\n\n    if (showingCards.length === 2 && showingCards[0].backgroundColor === showingCards[1].backgroundColor) {\n      cards = mapCardState(cards, ids, CardState.MATCHING)\n    } else if (showingCards.length === 2) {\n      let hidingCards = mapCardState(cards, ids, CardState.HIDING)\n      noClick = true;\n      this.setState({ cards, noClick }, () => {\n        setTimeout(() => {\n          this.setState({cards:hidingCards, noClick})\n        }, 3000)\n      })\n    }\n  }\n\n  handleNewGame() {\n    let cards = this.state.cards.map(c => ({\n      ...c,\n      cardState: CardState.HIDING\n    }))\n    cards = shuffle(cards)\n    this.setState({ cards })\n  }\n\n\n  render() {\n    const cards = this.state.cards.map(d => {\n      return (\n        <Card\n          key={d.id}\n          showing={d.cardState !== CardState.HIDING}\n          backgroundColor={d.backgroundColor}\n          onClick={() => this.handleClick(d.id)} />\n      )\n    })\n    return (\n      <div className=\"App\">\n        <Navbar onNewGame={this.handleNewGame} />\n        {cards}\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}